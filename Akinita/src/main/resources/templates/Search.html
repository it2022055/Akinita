<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{page_layout/layout}">

<head>
    <meta charset="UTF-8">
    <title>Akinita</title>
    <link th:href="@{/css/index.css}" rel="stylesheet">
</head>
<body>
<div layout:fragment="main-content" class="container">
    <form class="form" th:action="@{/searchProperties}" method="get">
        <!-- Location Field -->
        <div class="field">
            <label>Location</label>
            <input autocomplete="off" placeholder="Location" class="input-field" type="text" name="location">
        </div>

        <!-- Price Range Fields -->
        <div class="field">
            <label for="minPrice">Min Price</label>
            <input type="number" id="minPrice" name="minPrice" placeholder="Min Price" min="0" max="10000000">
        </div>
        <div class="field">
            <label for="maxPrice">Max Price</label>
            <input type="number" id="maxPrice" name="maxPrice" placeholder="Max Price" min="0" max="10000000">
        </div>
        <div class="field">
            <label for="priceSlider">Price Range:</label>
            <input type="range" id="priceSlider" name="priceRange" min="0" max="100000" step="100" value="0" oninput="updatePriceDisplay()">
            <span id="priceDisplay">0 €</span>
        </div>

        <!-- Square Meter Fields -->
        <div class="field">
            <label for="minSize">Min Size (sq meters)</label>
            <input type="number" id="minSize" name="minSize" placeholder="Min Size" min="1" max="50000">
        </div>
        <div class="field">
            <label for="maxSize">Max Size (sq meters)</label>
            <input type="number" id="maxSize" name="maxSize" placeholder="Max Size" min="1" max="50000">
        </div>
        <div class="field">
            <label for="sizeSlider">Size Range:</label>
            <input type="range" id="sizeSlider" name="sizeRange" min="1" max="50000" step="1" value="1" oninput="updateSizeDisplay()">
            <span id="sizeDisplay">1 m²</span>
        </div>

        <!-- Property Type Dropdown -->
        <div class="field">
            <label for="propertyType">Property Type:</label>
            <select id="propertyType" name="propertyType" onchange="toggleFieldsBasedOnPropertyType()">
                <option value="House">House</option>
                <option value="CommercialProperty">Commercial Property</option>
                <option value="Parking">Parking</option>
                <option value="Land">Land</option>
            </select>
        </div>

        <!-- Dynamic Fields Based on Property Type -->
        <div id="dynamicFields"></div>

        <button type="submit" class="button1">Search</button>
    </form>
</div>

<script>
    // Update the displayed price value based on the slider position
    function updatePriceDisplay() {
        var price = document.getElementById('priceSlider').value;
        document.getElementById('priceDisplay').textContent = '€' + price;
    }

    // Update the displayed size value based on the slider position
    function updateSizeDisplay() {
        var size = document.getElementById('sizeSlider').value;
        document.getElementById('sizeDisplay').textContent = size + ' m²';
    }

    // Toggle dynamic fields based on selected property type
    function toggleFieldsBasedOnPropertyType() {
        var propertyType = document.getElementById('propertyType').value;
        var dynamicFields = document.getElementById('dynamicFields');
        dynamicFields.innerHTML = '';  // Clear dynamic fields

        if (propertyType === 'Land' || propertyType === 'Parking') {
            dynamicFields.innerHTML = `
                <div class="field">
                    <label for="constructionDate">Construction Date (if applicable):</label>
                    <input type="date" id="constructionDate" name="constructionDate">
                </div>
                <div class="field">
                    <label for="size">Square Feet:</label>
                    <input type="number" id="size" name="size" min="1" max="50000" placeholder="Square Feet">
                </div>
            `;
        }

        if (propertyType === 'House' || propertyType === 'CommercialProperty') {
            dynamicFields.innerHTML = `
                <div class="field">
                    <label for="constructionDate">Construction Date (if applicable):</label>
                    <input type="date" id="constructionDate" name="constructionDate">
                </div>
                <div class="field">
                    <label for="size">Square Feet:</label>
                    <input type="number" id="size" name="size" min="1" max="50000" placeholder="Square Feet">
                </div>
                <div class="field">
                    <label for="buildingFees">Building Fees (if applicable):</label>
                    <select id="buildingFees" name="buildingFees">
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>
            `;
        }
    }

    // Initialize the display on page load
    window.onload = function() {
        updatePriceDisplay();
        updateSizeDisplay();
    }
</script>
</body>
</html>
